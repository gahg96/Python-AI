# Gamium Finance AI 🎮💰

**基于 AlphaZero 的金融行业经营决策系统**

利用类似 AlphaZero 的强化学习方法，构建金融机构（银行、保险等）的智能经营决策系统。通过"数字孪生 + AI 博弈"的方式，让 AI 在虚拟环境中模拟数百万次经营决策，找到穿越经济周期的最优策略。

## 🎯 项目愿景

> "如果 AlphaZero 能在围棋中战胜人类冠军，那么它能否帮助银行在经济周期中做出更好的决策？"

本项目受 [Gamium 金融行业最佳实践](docs/) 启发，旨在：

1. **构建金融数字孪生** - 模拟真实的银行经营环境（信贷、风控、客户行为、经济周期）
2. **训练 AlphaZero 智能体** - 通过自我对弈学习最优经营策略
3. **支持决策验证** - 在 AI 验证的策略空间中探索"what-if"场景

## 🌐 在线体验

**🔗 在线Demo**: [https://gamium-finance-ai.onrender.com](https://gamium-finance-ai.onrender.com)

### 核心功能模块

- **📊 大屏监控**: 实时银行经营数据可视化，支持多主题切换（暗色/中性/明亮）
- **👤 客户预测**: AI 风险评估与审批建议，支持18种客户类型（9种个人+9种企业）
- **📈 经济周期分析**: 不同周期下的违约率变化，可视化图表展示
- **🏦 银行模拟**: 10年经营模拟体验，多策略对比
- **⚖️ 策略对比**: 5种策略表现对比（随机/规则/保守/激进/AlphaZero），支持详细解释和AI分析
- **🔬 数据蒸馏**: 从历史数据提炼商业规律，生成合成客户数据
- **📋 数据浏览**: 查看客户详细字段信息，支持下钻分析
- **⚠️ 风控压力测试**: 模拟黑天鹅事件，评估策略韧性，支持敏感性分析和应急预案生成
- **🤖 多模型对抗评测**: 评测不同LLM模型在金融场景下的表现，支持18+主流模型
- **🎯 AI Hub**: 统一的AI模型管理平台，支持API密钥、配额、熔断、敏感词、权限控制
- **📚 使用说明**: 完整的系统功能说明文档，快速上手指南

## 🚀 快速开始

### 本地运行

```bash
cd Gamium-FinanceAI

# 创建虚拟环境
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# 或 venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt

# 启动 Web 服务
python app.py
# 访问 http://localhost:5000
```

### Web界面功能

访问 `http://localhost:5000` 后，您可以：

1. **📊 大屏监控** (`/dashboard.html`): 实时监控银行经营状况
   - 支持主题切换（暗色/中性/明亮）
   - 实时KPI更新
   - 风控压力测试监控
   - AI Hub使用统计

2. **👤 客户预测**: 生成客户并预测风险
   - 支持18种客户类型（工薪阶层、小微企业、自由职业、农户、专业人士、创业者、投资者、退休人员、学生、微型企业、小型企业、中型企业、大型企业、初创企业、科技初创、制造企业、贸易公司、服务企业）
   - 个人客户：输入年龄、月收入、负债等
   - 企业客户：输入成立年限、年营收、员工数等
   - 查看违约概率、流失概率、风险评分、预期LTV
   - 支持详细下钻分析

3. **📈 周期分析**: 查看不同经济周期下的违约率变化

4. **🏦 银行模拟**: 10年经营模拟，体验不同策略

5. **⚖️ 策略对比**: 对比5种策略的表现
   - 支持策略说明、指标计算说明、图表说明
   - AI智能解释功能

6. **🔬 数据蒸馏**: 生成合成客户数据，提炼商业规律

7. **⚠️ 风控压力测试**: 模拟黑天鹅事件
   - 支持多种事件类型（金融危机、经济衰退、利率冲击等）
   - 敏感性分析
   - 韧性评估
   - 应急预案生成

8. **🤖 模型评测**: 多模型对抗评测
   - 支持18+主流模型（OpenAI、Anthropic、Google、阿里云、DeepSeek、Moonshot、智谱、Ollama、RAG等）
   - 12项评测指标（准确率、幻觉率、合规率、一致性、专业性等）
   - 对话历史保存和导出

9. **🎯 AI Hub**: AI模型管理
   - 模型配置（API密钥、限额、熔断）
   - 敏感词管理
   - 权限控制
   - 使用统计（按部门/人员/模型/时间趋势下钻）

### 命令行演示

```bash
# 快速演示 - 观看 AI 运营银行 10 年
python demo.py --mode quick

# 策略对比 - 比较不同策略的表现
python demo.py --mode compare

# 交互模式 - 自己当行长做决策
python demo.py --mode interactive

# 数据蒸馏演示 - 展示从历史数据学习规律的过程
python demo_distillation.py --mode distill

# 客户预测演示 - 查看不同客户的违约预测
python demo_distillation.py --mode quick

# 经济周期影响分析
python demo_distillation.py --mode batch
```

### 训练 AlphaZero

```bash
# 快速训练 (约 5-10 分钟)
python train.py --iterations 30 --games 5

# 完整训练 (约 1 小时)
python train.py --iterations 100 --games 20

# 训练完成后，模型保存在 experiments/ 目录
```

## 📁 项目结构

```
Gamium-FinanceAI/
├── src/
│   ├── environment/           # 🌍 模拟环境
│   │   ├── lending_env.py     # 信贷策略环境 (Gym兼容)
│   │   └── economic_cycle.py  # 经济周期模拟器
│   │
│   ├── agents/                # 🤖 智能体
│   │   ├── network.py         # 神经网络 (策略+价值双头)
│   │   ├── mcts.py            # 蒙特卡洛树搜索
│   │   ├── alphazero_agent.py # AlphaZero 完整实现
│   │   └── baseline_agents.py # 基线策略
│   │
│   ├── data_distillation/     # 🔬 数据蒸馏
│   │   ├── customer_generator.py   # 客户生成器（支持18种客户类型）
│   │   ├── world_model.py          # 世界模型 (蒸馏出的物理定律)
│   │   └── distillation_pipeline.py # 完整蒸馏管道
│   │
│   ├── model_evaluation/      # 🤖 多模型评测
│   │   ├── model_gateway.py   # 统一模型网关
│   │   └── evaluator.py       # 对抗评测引擎
│   │
│   └── utils/                 # 🛠 工具
│       ├── visualization.py   # 可视化
│       └── logger.py          # 日志
│
├── web/                       # 🌐 Web界面
│   ├── index.html             # 主界面（支持主题切换）
│   └── dashboard.html         # 大屏监控
│
├── docs/                      # 📚 文档
│   ├── 系统功能说明.html      # 完整功能说明
│   ├── 策略功能详解.html      # 策略说明
│   └── 多模型对抗评测设计方案.md
│
├── data/                      # 💾 数据
│   ├── models_config.json    # 模型配置
│   └── scripts/              # 对话脚本
│
├── experiments/               # 💾 训练结果
├── train.py                   # 🚀 AlphaZero 训练脚本
├── app.py                     # 🌐 Flask Web应用
├── demo.py                    # 🎮 银行经营演示
├── demo_distillation.py       # 🔮 数据蒸馏演示
└── requirements.txt           # 📦 依赖
```

## 🔬 数据蒸馏流程

从历史数据中提炼"商业物理定律"的五步流程：

```
第一步: 目标定义与数据准备    → 收集并清洗历史贷款记录
第二步: 特征工程              → 提取静态/行为/信贷/环境特征  
第三步: 规律建模              → 训练模型学习隐藏规律
第四步: 函数封装              → 封装为 predict_customer_future() API
第五步: 验证与校准            → 使用保留数据回测验证
```

**蒸馏后的世界模型学到的关键规律：**
- 📈 小微企业主在经济下行时违约率急剧上升 (3x)
- ⚠️ 负债率超过60%是高风险信号 (2.5x)
- 🍽️ 餐饮业客户风险系数最高 (1.4x)
- 📊 历史逾期>90天的客户风险提高3倍

**经济周期影响分析示例:**
| 经济周期 | 平均违约率 | 高风险客户占比 |
|---------|-----------|--------------|
| 繁荣期 | 11.28% | 23% |
| 正常期 | 11.28% | 22% |
| 衰退期 | 14.72% | 28% |
| 萧条期 | **26.95%** | **70%** |

## 🎮 环境设计

### 信贷策略环境 (LendingEnv)

模拟银行 10 年的信贷经营，AI 需要在不同经济周期下做出决策：

**状态空间 (22 维)**:
- 宏观经济: GDP 增长率、利率、失业率、通胀率、信用利差、周期阶段
- 银行状态: 资本、资产、贷款、不良率、资本充足率、客群分布、利润

**动作空间 (5 维)**:
- 利率调整: [-2%, +2%]
- 审批通过率: [30%, 90%]
- 客群分配: 优质/次优/次级客户的投放权重

**奖励函数**:
- ✅ 月度利润 (正向激励)
- ⚠️ NPL 超标惩罚
- 🚨 资本充足率过低惩罚
- 💀 破产大额惩罚

### 经济周期

模拟四阶段经济周期：繁荣 → 衰退 → 萧条 → 复苏

```
繁荣期: GDP↑ 失业↓ 违约↓ → 可适度扩张
衰退期: GDP→ 失业↑ 违约↑ → 开始收缩
萧条期: GDP↓ 失业↑↑ 违约↑↑ → 防守为主  
复苏期: GDP↑ 失业↓ 违约↓ → 把握机会
```

## 🧠 AlphaZero 架构

### 神经网络

```
输入(22维) → 残差块x4 → 策略头(120动作概率)
                      → 价值头(状态估值)
```

### 训练循环

```
1. 自我对弈 → 生成 (状态, 动作概率, 奖励) 样本
2. 样本入库 → 经验回放缓冲区
3. 批量训练 → 策略损失 + 价值损失
4. 重复迭代 → 策略逐步提升
```

## 📊 性能对比

经过训练后，AlphaZero 通常能够：

| 策略 | 平均奖励 | 累计利润 | 平均NPL | 破产率 |
|------|---------|---------|---------|-------|
| 随机策略 | ~-50 | -200亿 | 8.5% | 60% |
| 规则策略 | ~20 | +80亿 | 3.2% | 15% |
| 保守策略 | ~15 | +60亿 | 2.1% | 5% |
| 激进策略 | ~-10 | -50亿 | 6.8% | 40% |
| **AlphaZero** | **~40** | **+150亿** | **2.0%** | **<5%** |

*具体数值因训练时长和随机种子而异*

### 策略说明

- **随机策略**: 完全随机决策，用于基线对比
- **规则策略**: 基于规则的决策（如负债率<60%通过），传统风控方法
- **保守策略**: 低风险偏好，高审批门槛，低利率
- **激进策略**: 高风险偏好，低审批门槛，高利率
- **AlphaZero策略**: 通过强化学习训练的最优策略，平衡风险与收益

详细策略说明和AI分析可在Web界面的"策略对比"页面查看。

## ✨ 最新功能

### 🎨 主题切换
支持三种主题模式：
- **暗色主题**: 科技感深色界面（默认）
- **中性主题**: 平衡的灰色调
- **明亮主题**: 清爽的浅色界面

### 👥 企业客户支持
新增9种企业客户类型：
- 微型企业、小型企业、中型企业、大型企业
- 初创企业、科技初创、制造企业、贸易公司、服务企业

支持企业专属字段：
- 成立年限、年营收、员工数、行业、城市等级
- 资产负债率、现金流、信用评级等

### ⚠️ 风控压力测试
模拟黑天鹅事件，评估策略韧性：
- **事件类型**: 金融危机、经济衰退、利率冲击、通胀飙升
- **敏感性分析**: GDP、失业率、利率、通胀率的影响分析
- **韧性评估**: 最大回撤、恢复时间、韧性评分
- **应急预案**: 自动生成风险应对建议

### 🤖 多模型对抗评测
评测不同LLM在金融场景下的表现：
- **支持模型**: OpenAI (GPT-4, GPT-3.5), Anthropic (Claude-3), Google (Gemini), 阿里云 (Qwen), DeepSeek, Moonshot, 智谱 (GLM-4), Ollama, RAG等18+模型
- **评测指标**: 准确率、幻觉率、合规率、一致性、专业性、响应质量、错误率、稳定性、性能评分、业务适配度、综合评分
- **测试用例**: 贷款审批、财富管理、信用风险评估、客户投诉处理、财务规划等
- **对话保存**: 支持保存为内部标准话术，导出JSON/TXT/CSV格式

### 🎯 AI Hub管理平台
统一的AI模型管理：
- **模型管理**: API密钥配置、使用限额、熔断设置、敏感词过滤
- **敏感词管理**: 添加、删除、分类管理敏感词
- **权限控制**: 用户管理、角色管理、权限分配
- **使用统计**: 调用统计、成本统计、错误监控，支持按部门/人员/模型/时间趋势下钻

### 📚 完整文档
- **系统功能说明**: 详细的功能介绍和使用指南
- **策略功能详解**: 策略说明、指标解释、图表解读、AI分析

## 🔮 下一步计划

- [x] **WebUI** - 可视化决策界面 ✅
- [x] **策略可解释性** - 理解 AI 决策背后的逻辑 ✅
- [x] **企业客户支持** - 支持企业客户类型 ✅
- [x] **风控压力测试** - 黑天鹅事件模拟 ✅
- [x] **多模型评测** - LLM模型对比评测 ✅
- [x] **AI Hub** - 模型管理平台 ✅
- [ ] **更真实的环境** - 添加资金成本、监管约束、市场竞争
- [ ] **多智能体博弈** - 模拟多家银行竞争
- [ ] **迁移学习** - 用真实数据微调模型

## 📚 参考资料

- [AlphaZero 论文](https://arxiv.org/abs/1712.01815)
- [Gamium 金融最佳实践](docs/Gamium%20金融行业最佳实践：开启商业决策的"未来演武场".pdf)
- [OpenAI Gym](https://gymnasium.farama.org/)

## 📖 使用文档

- [系统功能说明](docs/系统功能说明.html) - 完整的功能介绍和使用指南
- [策略功能详解](docs/策略功能详解.html) - 策略说明、指标解释、AI分析
- [多模型对抗评测设计方案](docs/多模型对抗评测设计方案.md) - 评测系统架构设计

## 🎯 核心特性

- ✅ **18种客户类型支持** - 9种个人客户 + 9种企业客户
- ✅ **实时大屏监控** - 支持主题切换，实时数据更新
- ✅ **智能风险评估** - 违约概率、流失概率、风险评分、预期LTV
- ✅ **风控压力测试** - 黑天鹅事件模拟，韧性评估
- ✅ **多模型评测** - 18+主流LLM模型对比评测
- ✅ **AI Hub管理** - 统一的模型管理平台
- ✅ **完整文档** - 详细的使用说明和功能解释

## 🚀 部署指南

### 一键部署到 Render (推荐)

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy)

1. Fork 本仓库到您的 GitHub
2. 登录 [Render](https://render.com)
3. 点击 "New" → "Web Service"
4. 连接您的 GitHub 仓库
5. 选择 `Gamium-FinanceAI` 目录
6. 配置:
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn app:app --bind 0.0.0.0:$PORT`
7. 点击 "Create Web Service"

### Docker 部署

```bash
# 构建镜像
docker build -t gamium-finance-ai .

# 运行容器
docker run -p 5000:5000 gamium-finance-ai
```

### Railway 部署

1. 登录 [Railway](https://railway.app)
2. 点击 "New Project" → "Deploy from GitHub repo"
3. 选择仓库，Railway 会自动检测并部署

### Heroku 部署

```bash
heroku login
heroku create gamium-finance-ai
git push heroku main
```

## 📝 License

MIT License

---

**Made with ❤️ for Financial AI Innovation**
